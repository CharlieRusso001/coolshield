(i=>{let s={container:"",init(){let a=this;jQuery(document).on("click",".aiosrs-rating-wrap .aiosrs-star-rating",function(s){s.preventDefault(),a.star_rating(this)}),jQuery(document).on("mouseover",".aiosrs-rating-wrap .aiosrs-star-rating",function(s){s.preventDefault(),a.hover_star_rating(this)}),jQuery(document).on("mouseout",".aiosrs-rating-wrap .aiosrs-star-rating-wrap",function(s){s.preventDefault(),i(this).hasClass("disabled")||(s=i(this).parent().find(".aiosrs-rating").text(),a.update_stars(i(this),s))})},hover_star_rating(s){var a=i(s).closest(".aiosrs-star-rating-wrap"),s=i(s).data("index");a.hasClass("disabled")||this.update_stars(a,s)},update_stars(s,a){let t=5<a?5:parseInt(a),r=a===(t=5<a?5:a<0?0:parseInt(a))||5<a||a<0?0:1;s.find("span").each(function(s){i(this).removeClass("dashicons-star-filled dashicons-star-half dashicons-star-empty"),s<t?i(this).addClass("dashicons-star-filled"):(s===t&&r,i(this).addClass("dashicons-star-empty"))})},star_rating(s){let n=this,a=i(s).closest(".aiosrs-rating-wrap").data("schema-id"),e=i(s).closest(".aiosrs-star-rating-wrap"),t=i(s).data("index");e.hasClass("disabled")||(n.update_stars(e,t),e.addClass("disabled"),i.ajax({url:AIOSRS_Frontend.ajaxurl,type:"POST",data:{action:"aiosrs_user_rating",rating:t,schemaId:a,post_id:AIOSRS_Frontend.post_id,nonce:AIOSRS_Frontend.user_rating_nonce}}).success(function(s){var a,t,r;!0===s.success&&(a=e.next(".aiosrs-rating-summary-wrap"),t=s.rating,r=s["rating-avg"],s=s["review-count"],a.find(".aiosrs-rating").text(r),a.find(".aiosrs-rating-count").text(s),0===e.next(".success-msg").length&&e.after('<span class="success-msg">'+AIOSRS_Frontend.success_msg+"</span>"),setTimeout(function(){e.parent().find(".success-msg").remove(),e.removeClass("disabled")},5e3),n.update_stars(e,t))}))}};i(function(){s.init()})})(jQuery);